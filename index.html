<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protories | IA Nutrition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0b0e14; color: #e2e8f0; font-family: 'Inter', sans-serif; }
        .garmin-blue { color: #00a9e0; }
        .garmin-border { border-color: #1e293b; }
        .btn-action { background-color: #1e293b; transition: all 0.2s; }
        .btn-action:active { transform: scale(0.95); }
    </style>
</head>
<body class="p-6 max-w-md mx-auto">

    <div class="flex justify-between items-center mb-10">
        <div>
            <h1 class="text-2xl font-black tracking-tighter">PROTORIES <span class="garmin-blue">PRO</span></h1>
            <p id="date-display" class="text-[10px] text-slate-500 uppercase tracking-widest font-bold"></p>
        </div>
        <div class="h-8 w-8 rounded-full border-2 border-sky-500 flex items-center justify-center">
            <div class="h-4 w-4 bg-sky-500 rounded-full animate-pulse"></div>
        </div>
    </div>

    <div class="relative flex justify-center items-center mb-10">
        <svg class="w-64 h-64 transform -rotate-90">
            <circle cx="128" cy="128" r="110" stroke="#1e293b" stroke-width="14" fill="transparent" />
            <circle id="progress-bar" cx="128" cy="128" r="110" stroke="#00a9e0" stroke-width="14" fill="transparent" 
                    stroke-dasharray="691.15" stroke-dashoffset="691.15" stroke-linecap="round"
                    class="transition-all duration-1000 ease-out" />
        </svg>
        <div class="absolute text-center">
            <span id="current-prot" class="text-6xl font-black italic">0</span>
            <span class="block text-slate-500 font-bold uppercase text-xs">Grammes / <span id="goal-display">160</span></span>
        </div>
    </div>

    <div class="mb-8">
        <label for="camera-input" class="w-full bg-white text-black font-black py-4 rounded-2xl flex items-center justify-center gap-3 cursor-pointer hover:bg-sky-400 transition-all">
            üì∏ ANALYSER MON PLAT (IA)
        </label>
        <input type="file" id="camera-input" accept="image/*" capture="environment" class="hidden" onchange="processImage(event)">
        <p id="ia-status" class="text-center text-[10px] mt-2 text-slate-500 italic">Pr√™t pour analyse visuelle</p>
    </div>

    <div class="grid grid-cols-2 gap-3 mb-10">
        <button onclick="addProt(30, 'Poulet')" class="btn-action p-4 rounded-xl border garmin-border text-left">
            <span class="block text-xs text-slate-500">Poulet</span>
            <span class="text-lg font-bold">+30g</span>
        </button>
        <button onclick="addProt(25, 'Whey')" class="btn-action p-4 rounded-xl border garmin-border text-left">
            <span class="block text-xs text-slate-500">Whey</span>
            <span class="text-lg font-bold">+25g</span>
        </button>
        <button onclick="addProt(12, '2 Oeufs')" class="btn-action p-4 rounded-xl border garmin-border text-left">
            <span class="block text-xs text-slate-500">2 Oeufs</span>
            <span class="text-lg font-bold">+12g</span>
        </button>
        <button onclick="resetDaily()" class="btn-action p-4 rounded-xl border border-red-900/30 text-left">
            <span class="block text-xs text-red-500 uppercase">Reset</span>
            <span class="text-lg font-bold text-red-500">000</span>
        </button>
    </div>

    <script>
        // CONFIGURATION
        let currentProt = parseInt(localStorage.getItem('protories_total')) || 0;
        let dailyGoal = 160;
        const API_KEY = "TON_API_KEY_ICI"; // On mettra ta cl√© apr√®s

        // INITIALISATION
        document.getElementById('date-display').innerText = new Date().toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long' });
        updateUI();

        function addProt(amount, type) {
            currentProt += amount;
            localStorage.setItem('protories_total', currentProt);
            updateUI();
            console.log("Ajout√©:", type, amount + "g");
        }

        function updateUI() {
            document.getElementById('current-prot').innerText = currentProt;
            const circle = document.getElementById('progress-bar');
            const circumference = 2 * Math.PI * 110;
            const offset = circumference - (currentProt / dailyGoal * circumference);
            circle.style.strokeDashoffset = Math.max(0, offset);
        }

        function resetDaily() {
            if(confirm("R√©initialiser la journ√©e ?")) {
                currentProt = 0;
                localStorage.setItem('protories_total', 0);
                updateUI();
            }
        }

        async function processImage(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            document.getElementById('ia-status').innerText = "Analyse en cours par Gemini...";
            document.getElementById('ia-status').classList.add('text-sky-400');

            // Simulation de l'IA pour le moment
            setTimeout(() => {
                alert("Photo re√ßue ! (On connectera ta cl√© API √† cette √©tape pour l'analyse r√©elle)");
                document.getElementById('ia-status').innerText = "Analyse termin√©e";
            }, 2000);
        }
    </script>
</body>
</html>
